<header class="lantian clearfix">
    <h1 class="float-left"><a href="<%- (function() {
        if(is_default_language(page_language())) {
            return url_for(config.root);
        } else {
            return url_for(config.root + '/' + page_language());
        }
    })(); %>"><%= config.title %></a></h1>
    <ul class="nav nav-pills float-left">
        <% if(theme_config(page_language()).nav) { %>
            <li class="nav-item dropdown">
                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><%- __('page') %> <span class="caret"></span></a>
                <div class="dropdown-menu">
                    <% theme_config(page_language()).nav.forEach(function(link) { %>
                        <a class="dropdown-item<% if(link.url == '/' + page.path) { %> active<% } %>" href="<%- url_for(remove_trailing_slash(link.url)) %>"><%- link.name %></a>
                    <% }) %>
                </div>
            </li>
        <% } %>

        <% if(site.categories && site.categories.length) { %>
        <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><%- __('category') %> <span class="caret"></span></a>
            <div class="dropdown-menu">
                <% site.categories.sort('name', 'asc').each(function(category) { %>
                    <% if('' == category.name) return; %>
                    <a class="dropdown-item<%
                        if(is_post()) {
                            if(_.includes(page.categories.map(c => c.name), category.name)) {
                                %> active<%
                            }
                        } else if(is_category()) {
                            if(page.category == category.name) {
                                %> active<%
                            }
                        } %>" href="<%- url_for(remove_trailing_slash(category.path)) %>"><%- category.name %></a>
                <% }) %>
            </div>
        </li>
        <% } %>

        <% const languages = display_languages(); %>
        <% if (languages.length > 1) { %>
        <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><%- __('language') %> <span class="caret"></span></a>
            <div class="dropdown-menu">
                <% languages.forEach((language) => { %>
                    <a href="<%= url_for(remove_trailing_slash(i18n_path(!is_default_language(language) ? language : null))) %>" class="dropdown-item<% if(language == page.language) { %> active<% } %>">
                        <%= language_name(language) %>
                    </a>
                <% }) %>
            </div>
        </li>
        <% } %>
    </ul>
    <ul class="nav nav-pills float-right">
        <li class="nav-item">
            <a id="search-button" class="nav-link" href="#"><i class="fas fa-search"></i>
                <span class="d-none d-md-inline"><%- __('search') %></span>
            </a>
        </li>
        <li class="nav-item position-relative d-none d-md-block">
            <a class="nav-link" id="elderclock" href="#"><span id="elderclock-time">00:00:00</span></a>
        </li>
    </ul>
</header>
