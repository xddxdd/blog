---
import { type Language } from '../lib/language'
import { Page } from '../lib/pages'
import PostMetaWidget from './fragments/PostMetaWidget.astro'
import TableOfContent from './fragments/TableOfContent.astro'

type Props = {
  language: Language
  page: Page
}

const { language, page } = Astro.props
const __ = language.getTranslation

const { Content, headings } = await page.collectionEntry.render()
---

<article>
  <div class="d-flex">
    <div class="post-info-wrap">
      <div class="post-info">
        <PostMetaWidget
          fontAwesomeClass="fas fa-list"
          label={__('table_of_contents')}
        >
          <TableOfContent headings={headings} />
        </PostMetaWidget>
      </div>
    </div>
    <div class="post-wrap">
      <h1 class="post-title">
        <a href={page.getFullURL()} rel="bookmark" title={page.title}
          >{page.title}</a
        >
      </h1>
      <div class="post-text">
        <Content />
      </div>
    </div>
  </div>
</article>
